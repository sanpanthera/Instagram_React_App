(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,n){e.exports=n(62)},42:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"startAddingPost",function(){return w}),n.d(a,"startLoadingPost",function(){return P}),n.d(a,"startRemovingPost",function(){return C}),n.d(a,"startSavingComments",function(){return x}),n.d(a,"startLoadingComments",function(){return I}),n.d(a,"removePost",function(){return T}),n.d(a,"addPost",function(){return M}),n.d(a,"addComment",function(){return R}),n.d(a,"loadPosts",function(){return W}),n.d(a,"loadComments",function(){return V});var c=n(0),o=n.n(c),r=n(24),i=n.n(r),s=(n(42),n(10)),u=n(8),m=n(22),l=n(17),p=n(27),d=[{id:0,description:"beautiful landscape",imageLink:"https://image.jimcdn.com/app/cms/image/transf/none/path/sa6549607c78f5c11/image/i4eeacaa2dbf12d6d/version/1490299332/most-beautiful-landscapes-in-europe-lofoten-european-best-destinations-copyright-iakov-kalinin.jpg3919321_1443393332_n.jpg"},{id:1,description:"Aliens???",imageLink:"https://img.purch.com/rc/640x415/aHR0cDovL3d3dy5zcGFjZS5jb20vaW1hZ2VzL2kvMDAwLzA3Mi84NTEvb3JpZ2luYWwvc3BhY2V4LWlyaWRpdW00LWxhdW5jaC10YXJpcS1tYWxpay5qcGc=08323785_735653395_n.jpg"},{id:2,description:"On a vacation!",imageLink:"https://fm.cnbc.com/applications/cnbc.com/resources/img/editorial/2017/08/24/104670887-VacationExplainsTHUMBWEB.1910x1000.jpg"}];var f=Object(u.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_POST":return[].concat(Object(m.a)(e.slice(0,t.index)),Object(m.a)(e.slice(t.index+1)));case"ADD_POST":return[].concat(Object(m.a)(e),[t.post]);case"LOAD_POSTS":return t.posts;default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENT":return e[t.postId]?Object(p.a)({},e,Object(l.a)({},t.postId,[].concat(Object(m.a)(e[t.postId]),[t.comment]))):Object(p.a)({},e,Object(l.a)({},t.postId,[t.comment]));case"LOAD_COMMENTS":return t.comments;default:return e}}}),h=n(26),b=n(12),v=n(13),g=n(15),E=n(14),O=n(16);var j=function(e){var t=e.post;return o.a.createElement("figure",{className:"figure"},o.a.createElement(s.b,{to:"/single/".concat(t.id)}," ",o.a.createElement("img",{className:"photo",src:t.imageLink,alt:t.description})),o.a.createElement("figcaption",null," ",o.a.createElement("p",null," ",t.description," ")," "),o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{onClick:function(){e.startRemovingPost(e.index,t.id),e.history.push("/")}}," Remove "),o.a.createElement(s.b,{className:"button",to:"/single/".concat(t.id)},o.a.createElement("div",{className:"comment-count"},o.a.createElement("div",{className:"speech-bubble"}," "),e.comments[t.id]?e.comments[t.id].length:0))))};var y=function(e){return o.a.createElement("div",null,o.a.createElement(s.b,{className:"addIcon",to:"/AddPhoto"}," "),o.a.createElement("div",{className:"photoGrid"},e.posts.sort(function(e,t){return t.id-e.id}).map(function(t,n){return o.a.createElement(j,Object.assign({key:n,post:t},e,{index:n}))})))},S=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).handleSubmit=function(e){e.preventDefault();var t=e.target.elements.link.value,a=e.target.elements.description.value,c={id:Number(new Date),description:a,imageLink:t};a&&t&&(n.props.startAddingPost(c),n.props.onHistory.push("/"))},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"form"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{type:"text",placeholder:"Link",name:"link"}),o.a.createElement("input",{type:"text",placeholder:"Desciption",name:"description"}),o.a.createElement("button",null," Post ")))}}]),t}(c.Component),k=n(11),_=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).handleSubmit=function(e){e.preventDefault();var t=e.target.elements.comment.value;n.props.addComment(t,n.props.id),e.target.elements.comment.value=""},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"comment"},this.props.comments.map(function(e,t){return o.a.createElement("p",{key:t}," ",e," ")}),o.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},o.a.createElement("input",{type:"text",placeholder:"comment",name:"comment"}),o.a.createElement("input",{type:"submit",hidden:!0})))}}]),t}(c.Component),N=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.match,n=e.posts,a=Number(t.params.id),c=n.find(function(e){return e.id===a}),r=this.props.comments[t.params.id]||[],i=this.props.posts.findIndex(function(e){return e.id===a});return this.props.loading?o.a.createElement("div",{className:"loader"},"Loading..."):c?o.a.createElement("div",{className:"single-photo"},o.a.createElement(j,Object.assign({post:c},this.props,{index:i})),o.a.createElement(_,{addComment:this.props.startSavingComments,comments:r,id:a})):o.a.createElement("h1",null,"No Post Found")}}]),t}(c.Component),D=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).state={loading:!0},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.startLoadingPost().then(function(){e.setState({loading:!1})}),this.props.startLoadingComments()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h1",null,o.a.createElement(s.b,{to:"/"}," Picture Album ")),o.a.createElement(k.a,{exact:!0,path:"/",render:function(){return o.a.createElement("div",null,o.a.createElement(y,e.props))}}),o.a.createElement(k.a,{path:"/AddPhoto",render:function(t){var n=t.history;return o.a.createElement(S,Object.assign({},e.props,{onHistory:n}))}}),o.a.createElement(k.a,{path:"/single/:id",render:function(t){return o.a.createElement(N,Object.assign({loading:e.state.loading},e.props,t))}}))}}]),t}(c.Component),L=n(30);L.initializeApp({apiKey:"AIzaSyAywukLHqn9IWkiX3t7i3ItFx4C7oBquFk",authDomain:"picturealbum-98939.firebaseapp.com",databaseURL:"https://picturealbum-98939.firebaseio.com",projectId:"picturealbum-98939",storageBucket:"picturealbum-98939.appspot.com",messagingSenderId:"93094101014",appId:"1:93094101014:web:c2498984bc3e7a1f"});var A=L.database(),w=function(e){return function(t){return A.ref("posts").update(Object(l.a)({},e.id,e)).then(function(){t(M(e))}).catch(function(e){console.log(e)})}},P=function(){return function(e){return A.ref("posts").once("value").then(function(t){var n=[];t.forEach(function(e){n.push(e.val())}),e(W(n))}).catch(function(e){console.log(e)})}},C=function(e,t){return function(n){return A.ref("posts/".concat(t)).remove().then(function(){return A.ref("comments/".concat(t)).remove().then(function(){n(T(e))})}).catch(function(e){console.log(e)})}},x=function(e,t){return function(n){return A.ref("comments/".concat(t)).push(e).then(function(){n(R(e,t))}).catch(function(e){console.log(e)})}},I=function(){return function(e){return A.ref("comments").once("value").then(function(t){var n={};t.forEach(function(e){n[e.key]=Object.values(e.val())}),e(V(n))}).catch(function(e){console.log(e)})}},T=function(e){return{type:"REMOVE_POST",index:e}},M=function(e){return{type:"ADD_POST",post:e}},R=function(e,t){return{type:"ADD_COMMENT",comment:e,postId:t}},W=function(e){return{type:"LOAD_POSTS",posts:e}},V=function(e){return{type:"LOAD_COMMENTS",comments:e}},B=Object(k.d)(Object(h.b)(function(e){return{posts:e.posts,comments:e.comments}},function(e){return Object(u.b)(a,e)})(D)),X=n(36),z=Object(u.d)(Object(u.a)(X.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),H=Object(u.e)(f,z);i.a.render(o.a.createElement(h.a,{store:H},o.a.createElement(s.a,null,o.a.createElement(B,null))),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.586bbe22.chunk.js.map